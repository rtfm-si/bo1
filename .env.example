# =============================================================================
# Board of One - Environment Configuration
# =============================================================================
# See docs/ENVIRONMENT_VARIABLES.md for detailed documentation

# -----------------------------------------------------------------------------
# LLM API Keys (Required)
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=your_anthropic_api_key_here
VOYAGE_API_KEY=your_voyage_api_key_here  # For embeddings (convergence detection)

# -----------------------------------------------------------------------------
# Redis Configuration (Session state, LLM caching, checkpoints)
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0
# Redis TTL defaults (see docs/REDIS_KEY_PATTERNS.md)
REDIS_SESSION_TTL=604800  # 7 days (seconds)
REDIS_CHECKPOINT_TTL=604800  # 7 days (seconds)
REDIS_CACHE_TTL=2592000  # 30 days (seconds)
REDIS_RATELIMIT_TTL=60  # 1 minute (seconds)

# -----------------------------------------------------------------------------
# PostgreSQL Configuration (Primary database)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://bo1:bo1_dev_password@localhost:5432/boardofone
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=boardofone
POSTGRES_USER=bo1
POSTGRES_PASSWORD=bo1_dev_password

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=development

# Debug & Logging
# DEBUG: When true, enables debug-level logging for bo1 modules
DEBUG=false
# LOG_LEVEL: Controls overall log verbosity (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# - INFO: Clean output with key events (recommended for most users)
# - DEBUG: Detailed bo1 internal logs (useful for debugging)
# - WARNING: Minimal output, only warnings and errors
LOG_LEVEL=INFO
# VERBOSE_LIBS: When true, shows debug logs from third-party libraries (anthropic, httpx, etc.)
# Set to true only when debugging API calls or network issues
VERBOSE_LIBS=false

# -----------------------------------------------------------------------------
# Cost & Safety Limits
# -----------------------------------------------------------------------------
MAX_COST_PER_SESSION=1.00  # USD - Hard limit per session
MAX_COST_PER_SUBPROBLEM=0.15  # USD - Target per sub-problem

# LangGraph Safety (Week 4+)
DELIBERATION_RECURSION_LIMIT=55  # Max graph steps (15 rounds Ã— 3 nodes + overhead)
DELIBERATION_TIMEOUT=3600  # 1 hour max (seconds)

# -----------------------------------------------------------------------------
# Model Configuration
# -----------------------------------------------------------------------------
DEFAULT_MODEL_PERSONA=claude-sonnet-4-5-20250929
DEFAULT_MODEL_FACILITATOR=claude-sonnet-4-5-20250929
DEFAULT_MODEL_SUMMARIZER=claude-haiku-4-5-20250929
DEFAULT_MODEL_DECOMPOSER=claude-sonnet-4-5-20250929
DEFAULT_MODEL_MODERATOR=claude-haiku-4-5-20250929

# AI Model Override (Testing Mode)
# When AI_OVERRIDE=true, ALL model calls use AI_OVERRIDE_MODEL instead
# This prevents expensive Sonnet costs during testing/development
# Recommended: Set to true during local testing, false in production
AI_OVERRIDE=false
AI_OVERRIDE_MODEL=claude-3-5-haiku-latest  # or "haiku" (alias)

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_PROMPT_CACHING=true  # 90% cost reduction on persona calls
ENABLE_CONVERGENCE_DETECTION=true  # Early stopping based on semantic similarity
ENABLE_DRIFT_DETECTION=true  # Prevent off-topic contributions
ENABLE_EARLY_STOPPING=true  # Stop when consensus reached

# A/B Testing (experimental features)
AB_TESTING_ENABLED=true

# -----------------------------------------------------------------------------
# Authentication (Week 7+)
# -----------------------------------------------------------------------------
# Supabase Auth
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_ANON_KEY=your_supabase_anon_key
# SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# JWT Configuration
# JWT_SECRET=your_jwt_secret_here
# JWT_ALGORITHM=HS256
# JWT_EXPIRE_MINUTES=1440  # 24 hours

# -----------------------------------------------------------------------------
# Admin & Monitoring (Week 9-10+)
# -----------------------------------------------------------------------------
# Admin API Key (for kill switches, monitoring)
# ADMIN_API_KEY=your_admin_api_key_here

# Grafana/Prometheus
# GRAFANA_PASSWORD=your_grafana_password
# PROMETHEUS_PORT=9090

# ntfy.sh Alerts (runaway sessions, cost reports)
# NTFY_URL=https://ntfy.sh
# NTFY_TOPIC=boardofone-alerts

# -----------------------------------------------------------------------------
# Email (Week 12+)
# -----------------------------------------------------------------------------
# Resend API (transactional emails)
# RESEND_API_KEY=your_resend_api_key

# -----------------------------------------------------------------------------
# Payments (Week 8+)
# -----------------------------------------------------------------------------
# Stripe
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_PUBLISHABLE_KEY=pk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# -----------------------------------------------------------------------------
# Rate Limiting (Week 8+)
# -----------------------------------------------------------------------------
# RATE_LIMIT_PER_MINUTE=10  # Free tier
# RATE_LIMIT_PER_HOUR=100  # Free tier
# RATE_LIMIT_PER_DAY=500  # Free tier
