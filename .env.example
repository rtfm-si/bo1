# =============================================================================
# Board of One - Environment Configuration (Example)
# =============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Only variables defined in bo1/config.py Settings class are used

# -----------------------------------------------------------------------------
# LLM API Keys (Required)
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=your_anthropic_api_key_here
OPENAI_API_KEY=your_openai_api_key_here  # For GPT models (fallback provider)
VOYAGE_API_KEY=your_voyage_api_key_here  # For voyage-3 embeddings (research cache, semantic similarity, convergence detection)

# LLM Provider Configuration
LLM_PRIMARY_PROVIDER=anthropic  # Primary provider: 'anthropic' or 'openai'
LLM_FALLBACK_ENABLED=true       # Enable fallback to secondary provider when primary unavailable

# -----------------------------------------------------------------------------
# Research API Keys (Optional - for external research features)
# -----------------------------------------------------------------------------
TAVILY_API_KEY=your_tavily_api_key_here  # Tavily web search API
BRAVE_API_KEY=your_brave_api_key_here    # Brave Search API
# -----------------------------------------------------------------------------
# Redis Configuration (Session state, LLM caching)
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=generate_with_openssl_rand_hex_32  # Generate: openssl rand -hex 32 (hex only, no special chars)
REDIS_URL=redis://:generate_with_openssl_rand_hex_32@localhost:6379/0

# -----------------------------------------------------------------------------
# PostgreSQL Configuration (v2+, Week 3.5)
# -----------------------------------------------------------------------------
POSTGRES_PASSWORD=generate_with_openssl_rand_hex_32  # Generate: openssl rand -hex 32 (hex only, no special chars)
DATABASE_URL=postgresql://bo1:generate_with_openssl_rand_hex_32@localhost:5432/boardofone

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Debug & Logging
DEBUG=false
LOG_LEVEL=INFO
VERBOSE_LIBS=false

# -----------------------------------------------------------------------------
# Cost & Safety Limits
# -----------------------------------------------------------------------------
MAX_COST_PER_SESSION=1.00

# -----------------------------------------------------------------------------
# A/B Testing
# -----------------------------------------------------------------------------
AB_TESTING_ENABLED=true

# -----------------------------------------------------------------------------
# AI Model Override (Testing Mode)
# -----------------------------------------------------------------------------
# When AI_OVERRIDE=true, ALL model calls use AI_OVERRIDE_MODEL instead
# This prevents expensive Sonnet costs during testing/development
# Recommended: Set to true during local testing, false in production
AI_OVERRIDE=false
AI_OVERRIDE_MODEL=claude-3-5-haiku-latest  # or "haiku" (alias)

# -----------------------------------------------------------------------------
# Security & Proxy Configuration
# -----------------------------------------------------------------------------
# Trusted reverse proxy IPs for X-Forwarded-For header parsing
# IMPORTANT: Only add IPs you control. Misconfigured trust enables IP spoofing.
# Leave empty in development (direct connections). Required in production.
# TRUSTED_PROXY_IPS=10.0.0.1                    # Single proxy (local Nginx)
# TRUSTED_PROXY_IPS=10.0.0.1,10.0.0.2           # Multiple proxies
# TRUSTED_PROXY_IPS=10.0.0.0/8                  # CIDR range (DigitalOcean)

# -----------------------------------------------------------------------------
# Web API Configuration (Week 6+)
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Hot reload in development
CORS_ORIGINS=http://localhost:3000,http://localhost:5173  # SvelteKit frontend

# Admin API Key (SERVER-SIDE ONLY - used in SvelteKit +page.server.ts files)
# NEVER expose this in the frontend (no PUBLIC_ prefix)
ADMIN_API_KEY=generate_with_openssl_rand_hex_32  # Generate: openssl rand -hex 32 (hex only, no special chars)

# -----------------------------------------------------------------------------
# SuperTokens Configuration (Week 6+)
# -----------------------------------------------------------------------------
SUPERTOKENS_CONNECTION_URI=http://supertokens:3567  # SuperTokens core service
SUPERTOKENS_API_KEY=generate_with_openssl_rand_hex_32  # Generate: openssl rand -hex 32
SUPERTOKENS_API_DOMAIN=http://localhost:8000  # Backend API domain (use https://boardof.one in prod)
SUPERTOKENS_WEBSITE_DOMAIN=http://localhost:5173  # Frontend domain (use https://boardof.one in prod)
COOKIE_SECURE=false  # Set to true in production (requires HTTPS)
COOKIE_DOMAIN=localhost  # Set to boardof.one in production

# OAuth Provider Credentials (Google, GitHub)
GOOGLE_OAUTH_CLIENT_ID=your_google_oauth_client_id_here
GOOGLE_OAUTH_CLIENT_SECRET=your_google_oauth_client_secret_here
LINKEDIN_OAUTH_CLIENT_ID=your_linkedin_oauth_client_id_here
LINKEDIN_OAUTH_CLIENT_SECRET=your_linkedin_oauth_client_secret_here
GITHUB_OAUTH_CLIENT_ID=your_github_oauth_client_id_here
GITHUB_OAUTH_CLIENT_SECRET=your_github_oauth_client_secret_here

# Google Sheets API (for public sheets import)
GOOGLE_API_KEY=your_google_api_key_here  # Create at https://console.cloud.google.com/apis/credentials

# -----------------------------------------------------------------------------
# Closed Beta Whitelist (For beta testing with ~10 users)
# -----------------------------------------------------------------------------
# Enable closed beta mode to restrict access to whitelisted emails only
CLOSED_BETA_MODE=false  # Set to true to enable email whitelist validation

# Whitelist is managed via database (beta_whitelist table) and admin API:
# - GET /api/admin/beta-whitelist - List all whitelisted emails
# - POST /api/admin/beta-whitelist - Add email to whitelist
# - DELETE /api/admin/beta-whitelist/{email} - Remove email from whitelist

# -----------------------------------------------------------------------------
# Email Configuration (Resend)
# -----------------------------------------------------------------------------
RESEND_API_KEY=re_your_resend_api_key_here  # Get from https://resend.com/api-keys

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# All feature flags are centralized in bo1/feature_flags/features.py
# See that file for complete documentation and import paths

# Authentication & Authorization
ENABLE_SUPERTOKENS_AUTH=true  # Enable SuperTokens auth (required for production)

# OAuth Providers
GOOGLE_OAUTH_ENABLED=true  # Enable Google OAuth provider
LINKEDIN_OAUTH_ENABLED=true  # Enable LinkedIn OAuth provider
GITHUB_OAUTH_ENABLED=true  # Enable GitHub OAuth provider

# Parallel Processing
ENABLE_PARALLEL_ROUNDS=true  # Multi-expert rounds (all experts contribute simultaneously)
ENABLE_PARALLEL_SUBPROBLEMS=false  # Parallel sub-problem execution (50-70% time reduction)

# Sub-Problem Deliberation
USE_SUBGRAPH_DELIBERATION=false  # Use LangGraph subgraph for real-time event streaming

# -----------------------------------------------------------------------------
# ntfy Push Notifications
# -----------------------------------------------------------------------------
NTFY_SERVER=https://ntfy.boardof.one  # Self-hosted ntfy server URL
NTFY_TOPIC_WAITLIST=bo1-waitlist      # Topic for waitlist signup alerts
NTFY_TOPIC_MEETING=bo1-meetings       # Topic for meeting start alerts
NTFY_TOPIC_REPORTS=bo1-reports        # Topic for daily/weekly database reports (low priority)
NTFY_TOPIC_ALERTS=bo1-alerts          # Topic for critical database alerts (urgent priority)

# -----------------------------------------------------------------------------
# Session Monitoring (Runaway Detection)
# -----------------------------------------------------------------------------
SESSION_MAX_DURATION_MINS=30    # Max session duration before flagged (minutes)
SESSION_MAX_COST_USD=5.0        # Max session cost before flagged (USD)
SESSION_STALE_MINS=5            # Minutes since last event to consider stale

# -----------------------------------------------------------------------------
# Monitoring Stack (Grafana, Prometheus) - Production Only
# -----------------------------------------------------------------------------
# Grafana admin credentials (change from defaults!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=generate_secure_password_here  # Generate: openssl rand -base64 24

# Basic auth for nginx reverse proxy (protects /monitoring/ endpoints)
# Create with: htpasswd -c /etc/nginx/.htpasswd bo1admin
# NGINX_BASIC_AUTH_USER=bo1admin
# NGINX_BASIC_AUTH_PASS=generate_secure_password_here

# -----------------------------------------------------------------------------
# DigitalOcean Spaces (S3-compatible object storage)
# -----------------------------------------------------------------------------
DO_SPACES_KEY=your_do_spaces_key_here
DO_SPACES_SECRET=your_do_spaces_secret_here
DO_SPACES_BUCKET=your_bucket_name
DO_SPACES_REGION=nyc3
DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com