repos:
  - repo: local
    hooks:
      # Backend linting
      - id: ruff-check
        name: Backend linting (ruff check)
        entry: docker-compose run --rm bo1 uv run ruff check . --fix
        language: system
        pass_filenames: false
        always_run: true

      - id: ruff-format
        name: Backend formatting (ruff format)
        entry: docker-compose run --rm bo1 uv run ruff format .
        language: system
        pass_filenames: false
        always_run: true

      - id: mypy-bo1
        name: Backend type checking (mypy)
        entry: docker-compose run --rm bo1 uv run mypy bo1/
        language: system
        pass_filenames: false
        always_run: true

      # Frontend checks
      - id: frontend-typecheck
        name: Frontend type checking
        entry: bash -c "cd frontend && npm run check"
        language: system
        pass_filenames: false
        files: ^frontend/

      # Fast backend tests (no LLM)
      - id: backend-tests-fast
        name: Backend tests (no LLM)
        entry: docker-compose run --rm bo1 pytest -v -m "not requires_llm" --tb=line
        language: system
        pass_filenames: false
        always_run: true
