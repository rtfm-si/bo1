---
run_id: e2e-2025-12-28-admin
started_at_utc: 2025-12-28T19:10:00Z
ended_at_utc: 2025-12-28T19:15:00Z
env:
  base_url: "https://boardof.one"
  browser: chromium
  viewport: 1440x900
account:
  user: e2e.test@boardof.one (admin)
scenario: admin_pages_v1
---

# Board of One - E2E Run Report (Admin Focus)

## Summary

- **Result**: WARN (1 issue fixed)
- **Total issues**: 1
- **Critical**: 1 / **Major**: 0 / **Minor**: 0
- **Top 3 observations**:
  1. Admin dashboard and most pages function correctly
  2. Cost Analytics per-user endpoint had SQL error (FIXED)
  3. All other admin pages (Users, Sessions, Whitelist, Metrics, Feedback, Ops) work

## Timeline

| Step | Action | Expected | Observed | Duration | Evidence |
|-----:|--------|----------|----------|----------:|----------|
| 0.x | Session inject | Cookies set | Success | 3s | console: OK |
| 1 | Verify auth | Admin link visible | Admin nav link present | 2s | snapshot verified |
| 2 | Admin Dashboard | Dashboard loads | All KPIs displayed correctly | 3s | screenshot: admin-dashboard.png |
| 3 | Users page | User table | 4 users listed with actions | 3s | screenshot: admin-users.png |
| 4 | Sessions page | Active sessions | 1 active session displayed | 3s | screenshot: admin-sessions.png |
| 5 | Costs page | Cost analytics | **500 ERROR** - per-user endpoint failed | 3s | screenshot: admin-costs-error.png |
| 6 | Whitelist page | Whitelist entries | 10 whitelisted emails shown | 3s | screenshot: admin-whitelist.png |
| 7 | Metrics page | Usage metrics | All metrics displayed | 3s | snapshot verified |
| 8 | Feedback page | Feedback list | Empty state shown correctly | 2s | snapshot verified |
| 9 | Ops page | Self-healing status | System healthy, 6 patterns configured | 3s | snapshot verified |

## Issues

### ISS-001 - Cost Analytics per-user endpoint returns 500

- **Severity**: Critical
- **Category**: Backend / SQL
- **Where**: `/api/admin/costs/per-user?days=30&limit=20`
- **Repro steps**:
  1. Navigate to /admin/costs
  2. Page loads but shows "An unexpected error occurred"
- **Observed**:
  - Console error: `Failed to load resource: the server responded with a status of 500`
  - API logs: `psycopg2.errors.UndefinedColumn: column u.user_id does not exist`
- **Expected**:
  - Page should display per-user cost breakdown
- **Evidence**:
  - Screenshot: admin-costs-error.png
  - Console: `[ERROR] Failed to load resource: 500`
  - Network: `GET /api/admin/costs/per-user?days=30&limit=20 => [500]`
  - API logs: `column u.user_id does not exist`
- **Root cause**:
  - SQL query in `backend/api/admin/costs.py:368` had incorrect column reference
  - Used `u.user_id` but users table has `u.id`
- **Resolution**: Fixed `LEFT JOIN users u ON ac.user_id = u.user_id` to `LEFT JOIN users u ON ac.user_id = u.id`

## Network Requests

| Method | URL | Status | Notes |
|--------|-----|--------|-------|
| GET | /api/v1/auth/me | 200 | Auth verified |
| GET | /admin/__data.json | 200 | Dashboard data |
| GET | /api/admin/research-cache/metrics | 200 | Cache metrics |
| GET | /api/admin/costs/research | 200 | Research costs |
| GET | /api/admin/extended-kpis | 200 | KPIs loaded |
| GET | /api/admin/runtime-config | 200 | Config loaded |
| GET | /api/admin/analytics/costs | 200 | Cost analytics |
| GET | /api/admin/analytics/costs/users | 200 | User costs |
| GET | /api/admin/analytics/costs/daily | 200 | Daily costs |
| GET | /api/admin/costs/by-provider | 200 | Provider costs |
| GET | /api/admin/costs/fixed | 200 | Fixed costs |
| GET | /api/admin/costs/per-user | **500** | **FAILED - FIXED** |
| GET | /api/admin/costs/cache-metrics | 200 | Cache metrics |

## Admin Pages Tested

| Page | Status | Notes |
|------|--------|-------|
| /admin | PASS | Dashboard with KPIs, toggles, monitoring links |
| /admin/users | PASS | 4 users with edit/lock/delete/promo/email actions |
| /admin/sessions | PASS | 1 active session displayed |
| /admin/costs | FAIL | Per-user endpoint 500 (FIXED) |
| /admin/whitelist | PASS | 10 whitelisted emails |
| /admin/metrics | PASS | User & usage metrics with charts |
| /admin/feedback | PASS | Empty state displayed |
| /admin/ops | PASS | System healthy, 6 error patterns |

## Recommendations

1. **FIXED**: SQL column reference in costs.py:368

---

**Conclusion**: Admin E2E run found 1 critical SQL error in cost analytics. Issue has been fixed. All other admin pages function correctly.

*Report generated by Automated E2E Explorer*
*Scenario: admin_pages_v1*
*Environment: Production (https://boardof.one)*
