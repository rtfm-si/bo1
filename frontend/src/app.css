@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ============================================================================
   Tailwind CSS 4.0 Theme Configuration (CSS-First)
   Migrated from tailwind.config.js
   ============================================================================ */

@theme {
	/* Dark mode configuration */
	--color-scheme: light dark;

	/* Brand Colors (primary teal from logo #00C8B3) */
	--color-brand-50: #e6faf8;
	--color-brand-100: #b3f0ea;
	--color-brand-200: #80e7dc;
	--color-brand-300: #4dddce;
	--color-brand-400: #1ad3c0;
	--color-brand-500: #00C8B3;
	--color-brand-600: #00a594;
	--color-brand-700: #008275;
	--color-brand-800: #006056;
	--color-brand-900: #003d37;
	--color-brand-950: #002621;

	/* Accent Colors (subtle warm tones) */
	--color-accent-50: #fef8f3;
	--color-accent-100: #fceee3;
	--color-accent-200: #f8dcc7;
	--color-accent-300: #f0c09b;
	--color-accent-400: #e59f6d;
	--color-accent-500: #d4844f;
	--color-accent-600: #b86d3e;
	--color-accent-700: #995636;
	--color-accent-800: #7a4530;
	--color-accent-900: #5c3528;
	--color-accent-950: #331d16;

	/* Success (teal-green) */
	--color-success-50: #edfcf7;
	--color-success-100: #d4f6ea;
	--color-success-200: #a9edd5;
	--color-success-300: #6eddb8;
	--color-success-400: #3cc69b;
	--color-success-500: #1aaa7e;
	--color-success-600: #158a67;
	--color-success-700: #116b51;
	--color-success-800: #0d503d;
	--color-success-900: #093a2d;
	--color-success-950: #05211a;

	/* Warning (muted amber) */
	--color-warning-50: #fefaf3;
	--color-warning-100: #fdf2e3;
	--color-warning-200: #fbe3c7;
	--color-warning-300: #f7cd9b;
	--color-warning-400: #f0b06d;
	--color-warning-500: #e08f3e;
	--color-warning-600: #c47330;
	--color-warning-700: #a15b26;
	--color-warning-800: #7d461f;
	--color-warning-900: #5c3419;
	--color-warning-950: #331d0e;

	/* Error (muted red) */
	--color-error-50: #fef5f5;
	--color-error-100: #fde8e8;
	--color-error-200: #fbd0d0;
	--color-error-300: #f7a9a9;
	--color-error-400: #f07f7f;
	--color-error-500: #e05555;
	--color-error-600: #c73d3d;
	--color-error-700: #a12e2e;
	--color-error-800: #7d2424;
	--color-error-900: #5c1b1b;
	--color-error-950: #330f0f;

	/* Info (soft blue-teal) */
	--color-info-50: #f0f9fc;
	--color-info-100: #dbf0f7;
	--color-info-200: #b7e1ef;
	--color-info-300: #85cce3;
	--color-info-400: #54b3d4;
	--color-info-500: #3299bf;
	--color-info-600: #277ba0;
	--color-info-700: #1f6182;
	--color-info-800: #194d66;
	--color-info-900: #133a4d;
	--color-info-950: #0b212c;

	/* Neutral (cool grays with subtle teal tint) */
	--color-neutral-50: #f8fafa;
	--color-neutral-100: #f1f4f5;
	--color-neutral-200: #e3e8ea;
	--color-neutral-300: #d1d9dc;
	--color-neutral-400: #a3b1b7;
	--color-neutral-500: #738891;
	--color-neutral-600: #526b75;
	--color-neutral-700: #3f5459;
	--color-neutral-800: #2a3b40;
	--color-neutral-900: #1a2629;
	--color-neutral-950: #0d1416;

	/* Font Families */
	--font-family-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
	--font-family-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;

	/* Font Sizes with Line Heights */
	--font-size-xs: 0.75rem;
	--line-height-xs: 1rem;
	--font-size-sm: 0.875rem;
	--line-height-sm: 1.25rem;
	--font-size-base: 1rem;
	--line-height-base: 1.5rem;
	--font-size-lg: 1.125rem;
	--line-height-lg: 1.75rem;
	--font-size-xl: 1.25rem;
	--line-height-xl: 1.75rem;
	--font-size-2xl: 1.5rem;
	--line-height-2xl: 2rem;
	--font-size-3xl: 1.875rem;
	--line-height-3xl: 2.25rem;
	--font-size-4xl: 2.25rem;
	--line-height-4xl: 2.5rem;
	--font-size-5xl: 3rem;
	--line-height-5xl: 1;
	--font-size-6xl: 3.75rem;
	--line-height-6xl: 1;
	--font-size-7xl: 4.5rem;
	--line-height-7xl: 1;
	--font-size-8xl: 6rem;
	--line-height-8xl: 1;
	--font-size-9xl: 8rem;
	--line-height-9xl: 1;

	/* Box Shadows */
	--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
	--shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
	--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
	--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
	--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
	--shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
	--shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);

	/* Border Radius */
	--radius-sm: 0.125rem;
	--radius: 0.25rem;
	--radius-md: 0.375rem;
	--radius-lg: 0.5rem;
	--radius-xl: 0.75rem;
	--radius-2xl: 1rem;
	--radius-3xl: 1.5rem;
	--radius-full: 9999px;

	/* Transition Durations */
	--duration-75: 75ms;
	--duration-100: 100ms;
	--duration-150: 150ms;
	--duration-200: 200ms;
	--duration-300: 300ms;
	--duration-500: 500ms;
	--duration-700: 700ms;
	--duration-1000: 1000ms;
	--duration-reveal: 400ms;
	--duration-typing: 150ms;
	--duration-progress: 300ms;

	/* Timing Functions */
	--timing-default: cubic-bezier(0.4, 0, 0.2, 1);
	--timing-linear: linear;
	--timing-in: cubic-bezier(0.4, 0, 1, 1);
	--timing-out: cubic-bezier(0, 0, 0.2, 1);
	--timing-in-out: cubic-bezier(0.4, 0, 0.2, 1);
	--timing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--timing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);

	/* Z-Index */
	--z-0: 0;
	--z-10: 10;
	--z-20: 20;
	--z-30: 30;
	--z-40: 40;
	--z-50: 50;
	--z-auto: auto;
	--z-dropdown: 1000;
	--z-sticky: 1020;
	--z-fixed: 1030;
	--z-modal-backdrop: 1040;
	--z-modal: 1050;
	--z-popover: 1060;
	--z-tooltip: 1070;
}

/* shadcn-svelte theme integration - maps CSS variables to Tailwind colors */
@theme inline {
	--radius-sm: calc(var(--shadcn-radius) - 4px);
	--radius-md: calc(var(--shadcn-radius) - 2px);
	--radius-lg: var(--shadcn-radius);
	--radius-xl: calc(var(--shadcn-radius) + 4px);
	--color-background: var(--background);
	--color-foreground: var(--foreground);
	--color-card: var(--card);
	--color-card-foreground: var(--card-foreground);
	--color-popover: var(--popover);
	--color-popover-foreground: var(--popover-foreground);
	--color-primary: var(--primary);
	--color-primary-foreground: var(--primary-foreground);
	--color-secondary: var(--secondary);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-muted: var(--muted);
	--color-muted-foreground: var(--muted-foreground);
	--color-destructive: var(--destructive);
	--color-border: var(--border);
	--color-input: var(--input);
	--color-ring: var(--ring);
}

/* ============================================================================
   CSS Custom Properties - Theme-aware variables
   Set by theme system in lib/design/themes.ts
   ============================================================================ */

:root {
	/* Font family */
	font-family: var(--font-family-sans);

	/* Default theme colors (light) - will be overridden by theme system */
	--color-background: #fafafa;
	--color-surface: #ffffff;
	--color-surfaceVariant: #f5f5f5;
	--color-textPrimary: #171717;
	--color-textSecondary: #525252;
	--color-textTertiary: #737373;
	--color-border: #e5e5e5;
	--color-borderFocus: #0284c7;
	--color-brand: #0284c7;
	--color-accent: #9333ea;
	--color-success: #16a34a;
	--color-warning: #eab308;
	--color-error: #dc2626;
	--color-info: #2563eb;

	/* shadcn-svelte semantic color tokens (using Bo1 brand colors) */
	--shadcn-radius: 0.5rem;
	--background: var(--color-neutral-50);
	--foreground: var(--color-neutral-900);
	--card: var(--color-surface);
	--card-foreground: var(--color-neutral-900);
	--popover: var(--color-surface);
	--popover-foreground: var(--color-neutral-900);
	--primary: var(--color-brand-600);
	--primary-foreground: #ffffff;
	--secondary: var(--color-neutral-200);
	--secondary-foreground: var(--color-neutral-900);
	--muted: var(--color-neutral-100);
	--muted-foreground: var(--color-neutral-500);
	--accent: var(--color-accent-500);
	--accent-foreground: #ffffff;
	--destructive: var(--color-error-600);
	--border: var(--color-neutral-200);
	--input: var(--color-neutral-200);
	--ring: var(--color-brand-500);
}

.dark {
	--background: var(--color-neutral-900);
	--foreground: var(--color-neutral-100);
	--card: var(--color-neutral-800);
	--card-foreground: var(--color-neutral-100);
	--popover: var(--color-neutral-800);
	--popover-foreground: var(--color-neutral-100);
	--primary: var(--color-brand-500);
	--primary-foreground: #ffffff;
	--secondary: var(--color-neutral-700);
	--secondary-foreground: var(--color-neutral-100);
	--muted: var(--color-neutral-800);
	--muted-foreground: var(--color-neutral-400);
	--accent: var(--color-accent-600);
	--accent-foreground: #ffffff;
	--destructive: var(--color-error-500);
	--border: var(--color-neutral-700);
	--input: var(--color-neutral-700);
	--ring: var(--color-brand-400);
}

/* ============================================================================
   Global Styles
   ============================================================================ */

body {
	background-color: var(--color-background);
	color: var(--color-textPrimary);
	transition: background-color 200ms, color 200ms;
}

/* ============================================================================
   Theme-aware Color Overrides
   Note: These override Tailwind's default colors to use our theme system
   ============================================================================ */

/* ============================================================================
   Theme-aware Color System - No hardcoded values, uses design tokens
   Supports: auto (system), light, dark, ocean modes
   ============================================================================ */

/* Light mode (default) - uses CSS variables from design tokens */
:root,
.theme-light {
	--text-primary: var(--color-neutral-900);
	--text-secondary: var(--color-neutral-600);
	--text-tertiary: var(--color-neutral-500);
	--border-primary: var(--color-neutral-200);
	--bg-gradient-start: var(--color-brand-50);
	--bg-gradient-mid: #ffffff;
	--bg-gradient-end: var(--color-neutral-50);
	--card-gradient-start: var(--color-brand-50);
	--card-gradient-mid: #ffffff;
	--card-gradient-end: var(--color-success-50);
}

/* Auto mode with dark system preference - IMPROVED CONTRAST */
@media (prefers-color-scheme: dark) {
	.theme-auto {
		--text-primary: var(--color-neutral-100);  /* Brighter for readability */
		--text-secondary: var(--color-neutral-300); /* More visible */
		--text-tertiary: var(--color-neutral-400);  /* Better contrast */
		--border-primary: var(--color-neutral-600); /* More visible borders */
		--bg-gradient-start: var(--color-neutral-900); /* Lighter background */
		--bg-gradient-mid: var(--color-neutral-900);
		--bg-gradient-end: var(--color-neutral-800);
		--card-gradient-start: var(--color-brand-900);
		--card-gradient-mid: var(--color-neutral-800);
		--card-gradient-end: var(--color-success-900);
	}
}

/* Explicit dark theme - IMPROVED CONTRAST */
.theme-dark {
	--text-primary: var(--color-neutral-100);  /* Brighter for readability */
	--text-secondary: var(--color-neutral-300); /* More visible */
	--text-tertiary: var(--color-neutral-400);  /* Better contrast */
	--border-primary: var(--color-neutral-600); /* More visible borders */
	--bg-gradient-start: var(--color-neutral-900); /* Lighter background */
	--bg-gradient-mid: var(--color-neutral-900);
	--bg-gradient-end: var(--color-neutral-800);
	--card-gradient-start: var(--color-brand-900);
	--card-gradient-mid: var(--color-neutral-800);
	--card-gradient-end: var(--color-success-900);
}

/* Ocean theme */
.theme-ocean {
	--text-primary: var(--color-brand-100);
	--text-secondary: var(--color-brand-300);
	--text-tertiary: var(--color-brand-400);
	--border-primary: var(--color-brand-600);
	--bg-gradient-start: #001a1f;
	--bg-gradient-mid: #003d47;
	--bg-gradient-end: #00565e;
	--card-gradient-start: var(--color-brand-900);
	--card-gradient-mid: #003d47;
	--card-gradient-end: var(--color-success-900);
}

/* Apply theme-aware colors to Tailwind classes */
.text-neutral-900 { color: var(--text-primary); }
.text-neutral-700 { color: var(--text-secondary); }
.text-neutral-600 { color: var(--text-secondary); }
.text-neutral-500 { color: var(--text-tertiary); }
.text-neutral-400 { color: var(--text-tertiary); }
.text-neutral-300 { color: var(--text-secondary); }
.text-neutral-200 { color: var(--text-secondary); }
.text-neutral-100 { color: var(--text-primary); }

.border-neutral-200 { border-color: var(--border-primary); }
.border-neutral-700 { border-color: var(--border-primary); }
.border-neutral-800 { border-color: var(--border-primary); }

/* Gradient overrides for theme-aware backgrounds */
.from-brand-50 { --tw-gradient-from: var(--card-gradient-start) var(--tw-gradient-from-position); }
.via-white { --tw-gradient-stops: var(--tw-gradient-from), var(--card-gradient-mid) var(--tw-gradient-via-position), var(--tw-gradient-to); }
.to-success-50 { --tw-gradient-to: var(--card-gradient-end) var(--tw-gradient-to-position); }
.from-neutral-100 { --tw-gradient-from: var(--bg-gradient-start) var(--tw-gradient-from-position); }
.via-neutral-50 { --tw-gradient-stops: var(--tw-gradient-from), var(--bg-gradient-mid) var(--tw-gradient-via-position), var(--tw-gradient-to); }
.to-neutral-100 { --tw-gradient-to: var(--bg-gradient-end) var(--tw-gradient-to-position); }

/* ============================================================================
   Accessibility Enhancements
   ============================================================================ */

/* Focus visible styling for keyboard navigation */
*:focus-visible {
	@apply outline-none ring-2 ring-brand-500 ring-offset-2;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* ============================================================================
   Scrollbar Styling
   ============================================================================ */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
	@apply w-2 h-2;
}

::-webkit-scrollbar-track {
	@apply bg-neutral-100 dark:bg-neutral-900;
}

::-webkit-scrollbar-thumb {
	@apply bg-neutral-300 dark:bg-neutral-700 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
	@apply bg-neutral-400 dark:bg-neutral-600;
}

/* Firefox */
* {
	scrollbar-width: thin;
	scrollbar-color: var(--color-neutral-300) var(--color-neutral-100);
}

.dark * {
	scrollbar-color: var(--color-neutral-700) var(--color-neutral-900);
}

/* ============================================================================
   Attention Animation - draws user attention to important elements
   ============================================================================ */

@keyframes attention-pulse {
	0%, 100% {
		box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
	}
	50% {
		box-shadow: 0 10px 15px -3px rgb(251 191 36 / 0.3), 0 4px 6px -4px rgb(251 191 36 / 0.2);
	}
}

.animate-attention-pulse {
	animation: attention-pulse 2s ease-in-out 3;
}

/* ============================================================================
   Typing Dots Animation - shows activity during LLM response generation
   ============================================================================ */

@keyframes typing-dot {
	0%, 80%, 100% {
		opacity: 0.3;
	}
	40% {
		opacity: 1;
	}
}

.animate-typing-dot {
	animation: typing-dot 1.4s infinite ease-in-out;
}

/* ============================================================================
   Thin Scrollbar for Heatmap
   ============================================================================ */

.scrollbar-thin::-webkit-scrollbar {
	height: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
	@apply bg-neutral-100 dark:bg-neutral-800 rounded;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
	@apply bg-neutral-300 dark:bg-neutral-600 rounded;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
	@apply bg-neutral-400 dark:bg-neutral-500;
}

.scrollbar-thin {
	scrollbar-width: thin;
}
